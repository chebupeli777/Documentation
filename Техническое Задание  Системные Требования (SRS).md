### **Документ №2: Техническое Задание / Системные Требования (SRS)**

**Цель:** Детально описать *КАК* система должна быть реализована для удовлетворения бизнес-требований.

---

**1. Введение**
Данный документ описывает функциональные и нефункциональные требования, архитектуру и проектные решения для платформы "Чебупели". Основание: Бизнес-Требования (BRD) v1.0.

**2. Обзор системы**
Веб-приложение с клиент-серверной архитектурой.
*   **Бэкенд:** стек уточняется (REST API на Node.js или другом выбранном стеке).
*   **Фронтенд:** стек уточняется (Single-Page Application на React).
*   **База данных:** Реляционная СУБД (PostgreSQL/MySQL).

**3. Функциональные требования (Детализация)**
**3.1. Модуль аутентификации и авторизации**
*   **F1.1:** `POST /api/users/register`
    *   Входные данные: `email`, `password`, `full_name`.
    *   Валидация: email уникален, password >= 8 символов.
    *   Ответ: JSON с данными пользователя (исключая пароль).
*   **F1.2:** `POST /api/users/login`
    *   Входные данные: `email`, `password`.
    *   Ответ: JSON с JWT-токеном и данными пользователя.
*   **F1.3:** Ролевая модель: `Student`, `Teacher`, `Admin`. Роль по умолчанию — `Student`. Смена роли на `Teacher` — через запрос к `Admin`.

**3.2. Модуль управления курсами**
*   **F2.1:** `POST /api/courses`
    *   Доступ: `Teacher`, `Admin`.
    *   Входные данные: `title`, `description`, `price`, `status` (enum: `Draft`, `On Review`, `Published`).
*   **F2.2:** `POST /api/courses/:id/modules`
    *   Входные данные: `title`, `order` (порядковый номер в курсе).
*   **F2.3:** `POST /api/modules/:id/lessons`
    *   Входные данные: `title`, `content_type` (`video`, `article`), `content_url` или `text_content`, `order`.

**3.3. Модуль обучения**
*   **F3.1:** `POST /api/courses/:id/enroll`
    *   Доступ: `Student`.
    *   Логика: Для платного курса — проверка успешного платежа (сущность `payments`). Для бесплатного — immediate создание записи в `enrollments`.
*   **F3.2:** `POST /api/assignments/:id/submissions`
    *   Входные данные: `solution_text` или `attachment_url`.
    *   Валидация: Пользователь должен быть записан на курс, к которому привязано задание.
*   **F3.3:** `PUT /api/submissions/:id`
    *   Доступ: `Teacher` (владелец курса) или `Admin`.
    *   Входные данные: `status` (`Approved`, `Rejected`), `feedback` (опционально).

**3.4. Модуль коммуникаций и уведомлений**
*   **F4.1:** `POST /api/courses/:id/messages`
    *   Валидация: Пользователь должен быть записан на курс.
    *   Сообщение сохраняется в `messages` с привязкой к `course_id` и `user_id`.
*   **F4.2:** Система должна создавать записи в `notifications` для событий: `new_message`, `submission_graded`, `course_published`.
*   **F4.3:** `GET /api/users/:id/notifications` должен возвращать только уведомления, принадлежащие текущему авторизованному пользователю.

**4. Нефункциональные требования**
*   **NFR1 (Производительность):** 95% запросов API должны выполняться быстрее 500 мс при нагрузке до 1000 одновременных пользователей.
*   **NFR2 (Безопасность):**
    *   Все пароли хэшируются с использованием bcrypt (salt rounds = 10).
    *   JWT-токен должен проверяться на всех защищенных эндпоинтах.
    *   На уровне API must быть реализована проверка прав доступа к данным (user can only access their own resources).
*   **NFR3 (Данные):** Резервное копирование БД должно выполняться ежедневно.

**5. Модель данных**
Ссылка на ER-диаграмму (в соответствии с предоставленным описанием сущностей и связей).

**6. Интерфейсы (API)**
Полная спецификация эндпоинтов (в соответствии с предоставленным списком, дополненная деталями из раздела 3 данного документа).